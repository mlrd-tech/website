<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="High Level mlrd Server# mlrd is a DynamoDB-compatible API that uses an SQL store (currently only MySQL) Clients (i.e. the application) connect to mlrd instead of DynamoDB The default mlrd port is 7999 A single mlrd instance can handle many tables Multiple mlrd instances can be run for the same tables, but currently mlrd uses a shared-nothing design; therefore, be careful to configure each mlrd instances identically (a future version of mlrd will use a shared control plane) The mlrd server (API, logging, etc.) is configured with an optional YAML file called a “sys config” Use the -sys command line flag to set a sys config mlrd defaults to structured log output on STDOUT with log levels error, warn, info, and debug for CreateTable requests mlrd prints to STDERR only if startup fails before initializing logging; else, mlrd logs only to STDOUT as configured Table configs are specified as command line arguments (after any command line flags), like mlrd tbl_A.yaml tbl_B.yaml If no table configs are specified, mlrd uses it controlPlane sys config settings to create new tables for CreateTable requests On startup, mlrd validates config files, initialize logging and metrics, creates DynamoDB clients, checks each table config and corresponding SQL table, adds missing SQL tables or indexes, and starts the API Use the -initcheck command line flag to run the startup sequence then exit; if successful, it prints “init check OK” and exits zero; else it prints an error and exists non-zero Currently, mlrd does not use or set a PID file To stop mlrd, send an interrupt or SIGTERM signal Tables# Tables are uniquely identified by a case-sensitive name Each table must be defined in YAML file called a “table config” Each table config is completely self-contained and independent; if, for example, two tables use the same MySQL settings, both table configs need a copy of those MySQL settings The minimal table config defines ddb.tableName and ddb.primaryKey; this would define a table in transparent mode Each table runs in one table mode: transparent: mlrd acts likes a transparent proxy for all requests; used to test and verify mlrd with the application migration: mlrd dual-writes and dual-reads DynamoDB and the SQL store depending on the migration step; a migration moves data from DynamoDB to the SQL store, ultimately allowing the application to stop using the DynamoDB table sql: mlrd uses only the SQL store; DynamoDB is not accessed A transparent mode table returns only DynamoDB errors; mlrd errors, if any, are only logged Before migrating an existing DynamoDB table to the SQL store, the table should be run in transparent mode for days or weeks to ensure that mlrd can parse and handle all request parameters Migrating a DynamoDB table to the SQL store is a four-part, multi-step process that should be performed by experienced app developers and DBAs Net-new tables can be created in SQL mode by specifying a table config that includes a ddb section, a mysql section, and no migration value. For all table modes, a table config is required that defines the table in the ddb section Metrics# mlrd collects and reports a comprehensive set of counter and gauge metrics Metrics are reported per-table with a table_name tag (aka label, attribute, or dimension) Metrics are OpenTelemetry and reported to an OpenTelemetry endpoint Metric reporting frequency is as fast as 1 second (maximum resolution); the default is 5 seconds Supported Requests# mlrd is fully-compatible with the DynamoDB data plane classic API: GetItem, BatchGetItem, Query, Scan, PutItem, UpdateItem, DeleteItem, BatchWriteItem Support for TransactGetItems and TransactWriteItems are still in development mlrd is fully-compatible with all expressions: ConditionExpression, FilterExpression, UpdateExpression, KeyConditionExpression, and ProjectionExpression. "><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://mlrd.tech/docs/v0-beta/high-level/"><meta property="og:site_name" content="mlrd Docs"><meta property="og:title" content="mlrd Docs"><meta property="og:description" content="High Level mlrd Server# mlrd is a DynamoDB-compatible API that uses an SQL store (currently only MySQL) Clients (i.e. the application) connect to mlrd instead of DynamoDB The default mlrd port is 7999 A single mlrd instance can handle many tables Multiple mlrd instances can be run for the same tables, but currently mlrd uses a shared-nothing design; therefore, be careful to configure each mlrd instances identically (a future version of mlrd will use a shared control plane) The mlrd server (API, logging, etc.) is configured with an optional YAML file called a “sys config” Use the -sys command line flag to set a sys config mlrd defaults to structured log output on STDOUT with log levels error, warn, info, and debug for CreateTable requests mlrd prints to STDERR only if startup fails before initializing logging; else, mlrd logs only to STDOUT as configured Table configs are specified as command line arguments (after any command line flags), like mlrd tbl_A.yaml tbl_B.yaml If no table configs are specified, mlrd uses it controlPlane sys config settings to create new tables for CreateTable requests On startup, mlrd validates config files, initialize logging and metrics, creates DynamoDB clients, checks each table config and corresponding SQL table, adds missing SQL tables or indexes, and starts the API Use the -initcheck command line flag to run the startup sequence then exit; if successful, it prints “init check OK” and exits zero; else it prints an error and exists non-zero Currently, mlrd does not use or set a PID file To stop mlrd, send an interrupt or SIGTERM signal Tables# Tables are uniquely identified by a case-sensitive name Each table must be defined in YAML file called a “table config” Each table config is completely self-contained and independent; if, for example, two tables use the same MySQL settings, both table configs need a copy of those MySQL settings The minimal table config defines ddb.tableName and ddb.primaryKey; this would define a table in transparent mode Each table runs in one table mode: transparent: mlrd acts likes a transparent proxy for all requests; used to test and verify mlrd with the application migration: mlrd dual-writes and dual-reads DynamoDB and the SQL store depending on the migration step; a migration moves data from DynamoDB to the SQL store, ultimately allowing the application to stop using the DynamoDB table sql: mlrd uses only the SQL store; DynamoDB is not accessed A transparent mode table returns only DynamoDB errors; mlrd errors, if any, are only logged Before migrating an existing DynamoDB table to the SQL store, the table should be run in transparent mode for days or weeks to ensure that mlrd can parse and handle all request parameters Migrating a DynamoDB table to the SQL store is a four-part, multi-step process that should be performed by experienced app developers and DBAs Net-new tables can be created in SQL mode by specifying a table config that includes a ddb section, a mysql section, and no migration value. For all table modes, a table config is required that defines the table in the ddb section Metrics# mlrd collects and reports a comprehensive set of counter and gauge metrics Metrics are reported per-table with a table_name tag (aka label, attribute, or dimension) Metrics are OpenTelemetry and reported to an OpenTelemetry endpoint Metric reporting frequency is as fast as 1 second (maximum resolution); the default is 5 seconds Supported Requests# mlrd is fully-compatible with the DynamoDB data plane classic API: GetItem, BatchGetItem, Query, Scan, PutItem, UpdateItem, DeleteItem, BatchWriteItem Support for TransactGetItems and TransactWriteItems are still in development mlrd is fully-compatible with all expressions: ConditionExpression, FilterExpression, UpdateExpression, KeyConditionExpression, and ProjectionExpression."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="v0-beta"><meta itemprop=name content="mlrd Docs"><meta itemprop=description content="High Level mlrd Server# mlrd is a DynamoDB-compatible API that uses an SQL store (currently only MySQL) Clients (i.e. the application) connect to mlrd instead of DynamoDB The default mlrd port is 7999 A single mlrd instance can handle many tables Multiple mlrd instances can be run for the same tables, but currently mlrd uses a shared-nothing design; therefore, be careful to configure each mlrd instances identically (a future version of mlrd will use a shared control plane) The mlrd server (API, logging, etc.) is configured with an optional YAML file called a “sys config” Use the -sys command line flag to set a sys config mlrd defaults to structured log output on STDOUT with log levels error, warn, info, and debug for CreateTable requests mlrd prints to STDERR only if startup fails before initializing logging; else, mlrd logs only to STDOUT as configured Table configs are specified as command line arguments (after any command line flags), like mlrd tbl_A.yaml tbl_B.yaml If no table configs are specified, mlrd uses it controlPlane sys config settings to create new tables for CreateTable requests On startup, mlrd validates config files, initialize logging and metrics, creates DynamoDB clients, checks each table config and corresponding SQL table, adds missing SQL tables or indexes, and starts the API Use the -initcheck command line flag to run the startup sequence then exit; if successful, it prints “init check OK” and exits zero; else it prints an error and exists non-zero Currently, mlrd does not use or set a PID file To stop mlrd, send an interrupt or SIGTERM signal Tables# Tables are uniquely identified by a case-sensitive name Each table must be defined in YAML file called a “table config” Each table config is completely self-contained and independent; if, for example, two tables use the same MySQL settings, both table configs need a copy of those MySQL settings The minimal table config defines ddb.tableName and ddb.primaryKey; this would define a table in transparent mode Each table runs in one table mode: transparent: mlrd acts likes a transparent proxy for all requests; used to test and verify mlrd with the application migration: mlrd dual-writes and dual-reads DynamoDB and the SQL store depending on the migration step; a migration moves data from DynamoDB to the SQL store, ultimately allowing the application to stop using the DynamoDB table sql: mlrd uses only the SQL store; DynamoDB is not accessed A transparent mode table returns only DynamoDB errors; mlrd errors, if any, are only logged Before migrating an existing DynamoDB table to the SQL store, the table should be run in transparent mode for days or weeks to ensure that mlrd can parse and handle all request parameters Migrating a DynamoDB table to the SQL store is a four-part, multi-step process that should be performed by experienced app developers and DBAs Net-new tables can be created in SQL mode by specifying a table config that includes a ddb section, a mysql section, and no migration value. For all table modes, a table config is required that defines the table in the ddb section Metrics# mlrd collects and reports a comprehensive set of counter and gauge metrics Metrics are reported per-table with a table_name tag (aka label, attribute, or dimension) Metrics are OpenTelemetry and reported to an OpenTelemetry endpoint Metric reporting frequency is as fast as 1 second (maximum resolution); the default is 5 seconds Supported Requests# mlrd is fully-compatible with the DynamoDB data plane classic API: GetItem, BatchGetItem, Query, Scan, PutItem, UpdateItem, DeleteItem, BatchWriteItem Support for TransactGetItems and TransactWriteItems are still in development mlrd is fully-compatible with all expressions: ConditionExpression, FilterExpression, UpdateExpression, KeyConditionExpression, and ProjectionExpression."><meta itemprop=wordCount content="604"><title>High Level | mlrd Docs</title><link rel=icon href=/docs/favicon.png><link rel=manifest href=/docs/manifest.json><link rel=canonical href=https://mlrd.tech/docs/v0-beta/high-level/><link rel=stylesheet href=/docs/book.min.c7c5a7bad7c8651d49384a78f4991de1d9208d263da075dce6bbe494107c31b7.css integrity="sha256-x8WnutfIZR1JOEp49Jkd4dkgjSY9oHXc5rvklBB8Mbc=" crossorigin=anonymous><script defer src=/docs/fuse.min.js></script><script defer src=/docs/en.search.min.81134f3345b93370ad34b49c9f5166cc85ba6d3943a1a02e3fbee201de7af5ba.js integrity="sha256-gRNPM0W5M3CtNLScn1FmzIW6bTlDoaAuP77iAd569bo=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-v0-beta"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/docs/><img src=/docs/img/mlrd-logo-v0.png alt=Logo><span>mlrd Docs</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/docs/v0-beta/>v0-beta</a><ul><li><a href=/docs/v0-beta/quick-start/>Quick Start</a></li><li><a href=/docs/v0-beta/high-level/ class=active>High Level</a></li><li><a href=/docs/v0-beta/concepts/>Concepts</a></li><li><input type=checkbox id=section-bba9f648e1c8239acdafe50731378ee0 class=toggle>
<label for=section-bba9f648e1c8239acdafe50731378ee0 class=flex><a role=button>Config</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/v0-beta/config/command-line/>Command Line</a></li><li><a href=/docs/v0-beta/config/feature-flags/>Feature Flags</a></li><li><a href=/docs/v0-beta/config/standard/>Standard</a></li><li><a href=/docs/v0-beta/config/sys/>Sys</a></li><li><a href=/docs/v0-beta/config/table/>Table</a></li><li><a href=/docs/v0-beta/config/mysql/>MySQL</a></li></ul></li><li><a href=/docs/v0-beta/metrics/>Metrics</a></li><li><input type=checkbox id=section-cf40158fdbef376e5228232dc90bf04d class=toggle>
<label for=section-cf40158fdbef376e5228232dc90bf04d class=flex><a role=button>Migration</a>
<img src=/docs/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/docs/v0-beta/migration/overview/>Overview</a></li><li><a href=/docs/v0-beta/migration/safety/>Safety</a></li><li><a href=/docs/v0-beta/migration/part-1/>Part 1: Compatiblity</a></li><li><a href=/docs/v0-beta/migration/part-2/>Part 2: Backfill</a></li><li><a href=/docs/v0-beta/migration/part-3/>Part 3: Verify SQL</a></li><li><a href=/docs/v0-beta/migration/part-4/>Part 4: Cut Over</a></li></ul></li><li><a href=/docs/v0-beta/supported-requests/>Supported Requests</a></li></ul></li><li><a href=/docs/table-modes/>Table Modes</a></li><li><a href=/docs/table-envs/>Table Envs</a></li><li><a href=/docs/lockout/>Lockout</a></li></ul><div style="margin:1em 0">~</div><div style=display:flex;flex-direction:column;gap:1em><a href="mailto:early@mlrd.tech?subject=Join%20private%20beta&body=Let%27s%20talk%20about%20mlrd." style=color:#ff8c42>Join Beta</a>
<a href=/>mlrd.tech</a></div></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/docs/icons/menu.svg class=book-icon alt=Menu></label><h3>High Level</h3><label for=toc-control><img src=/docs/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#mlrd-server><code>mlrd</code> Server</a></li><li><a href=#tables>Tables</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#supported-requests>Supported Requests</a></li></ul></nav></aside></header><div class=beta-docs>Beta Preview Docs</div><article class="markdown book-article"><h1 id=high-level>High Level</h1><h2 id=mlrd-server><code>mlrd</code> Server<a class=anchor href=#mlrd-server>#</a></h2><ul><li><code>mlrd</code> is a DynamoDB-compatible API that uses an SQL store (currently only MySQL)</li><li>Clients (i.e. the application) connect to <code>mlrd</code> instead of DynamoDB</li><li>The default <code>mlrd</code> port is <code>7999</code></li><li>A single <code>mlrd</code> instance can handle many tables</li><li>Multiple <code>mlrd</code> instances can be run for the same tables, but currently <code>mlrd</code> uses a shared-nothing design; therefore, be careful to configure each <code>mlrd</code> instances identically (a future version of <code>mlrd</code> will use a shared control plane)</li><li>The <code>mlrd</code> server (API, logging, etc.) is configured with an optional YAML file called a <a href=https://mlrd.tech/docs/v0-beta/config/sys/>&ldquo;sys config&rdquo;</a></li><li>Use the <code>-sys</code> command line flag to set a sys config</li><li><code>mlrd</code> defaults to structured log output on STDOUT with log levels <code>error</code>, <code>warn</code>, <code>info</code>, and <code>debug</code> for <code>CreateTable</code> requests</li><li><code>mlrd</code> prints to STDERR only if startup fails before initializing logging; else, <code>mlrd</code> logs only to STDOUT as configured</li><li>Table configs are specified as command line arguments (after any command line flags), like <code>mlrd tbl_A.yaml tbl_B.yaml</code></li><li>If no table configs are specified, <code>mlrd</code> uses it <code>controlPlane</code> sys config settings to create new tables for <code>CreateTable</code> requests</li><li>On startup, <code>mlrd</code> validates config files, initialize logging and metrics, creates DynamoDB clients, checks each table config and corresponding SQL table, adds missing SQL tables or indexes, and starts the API</li><li>Use the <code>-initcheck</code> command line flag to run the startup sequence then exit; if successful, it prints &ldquo;init check OK&rdquo; and exits zero; else it prints an error and exists non-zero</li><li>Currently, <code>mlrd</code> does not use or set a PID file</li><li>To stop <code>mlrd</code>, send an interrupt or SIGTERM signal</li></ul><h2 id=tables>Tables<a class=anchor href=#tables>#</a></h2><ul><li>Tables are uniquely identified by a case-sensitive name</li><li>Each table must be defined in YAML file called a <a href=https://mlrd.tech/docs/v0-beta/config/table/>&ldquo;table config&rdquo;</a></li><li>Each table config is completely self-contained and independent; if, for example, two tables use the same MySQL settings, both table configs need a copy of those MySQL settings</li><li>The minimal table config defines <code>ddb.tableName</code> and <code>ddb.primaryKey</code>; this would define a table in transparent mode</li><li>Each table runs in one <a href=https://mlrd.tech/docs/table-modes/>table mode</a>:<ul><li><code>transparent</code>: <code>mlrd</code> acts likes a transparent proxy for <em>all</em> requests; used to test and verify <code>mlrd</code> with the application</li><li><code>migration</code>: <code>mlrd</code> dual-writes and dual-reads DynamoDB and the SQL store depending on the migration step; a migration moves data from DynamoDB to the SQL store, ultimately allowing the application to stop using the DynamoDB table</li><li><code>sql</code>: <code>mlrd</code> uses only the SQL store; DynamoDB is not accessed</li></ul></li><li>A transparent mode table returns only DynamoDB errors; <code>mlrd</code> errors, if any, are only logged</li><li>Before migrating an existing DynamoDB table to the SQL store, the table should be run in transparent mode for days or weeks to ensure that <code>mlrd</code> can parse and handle all request parameters</li><li>Migrating a DynamoDB table to the SQL store is a four-part, multi-step process that should be performed by experienced app developers and DBAs</li><li>Net-new tables can be created in SQL mode by specifying a table config that includes a <code>ddb</code> section, a <code>mysql</code> section, and <em>no</em> <code>migration</code> value.</li><li>For all table modes, a table config is required that defines the table in the <code>ddb</code> section</li></ul><h2 id=metrics>Metrics<a class=anchor href=#metrics>#</a></h2><ul><li><code>mlrd</code> collects and reports a comprehensive set of counter and gauge metrics</li><li>Metrics are reported per-table with a <code>table_name</code> tag (aka label, attribute, or dimension)</li><li>Metrics are OpenTelemetry and reported to an OpenTelemetry endpoint</li><li>Metric reporting frequency is as fast as 1 second (maximum resolution); the default is 5 seconds</li></ul><h2 id=supported-requests>Supported Requests<a class=anchor href=#supported-requests>#</a></h2><ul><li><code>mlrd</code> is fully-compatible with the DynamoDB data plane classic API: <code>GetItem</code>, <code>BatchGetItem</code>, <code>Query</code>, <code>Scan</code>, <code>PutItem</code>, <code>UpdateItem</code>, <code>DeleteItem</code>, <code>BatchWriteItem</code></li><li>Support for <code>TransactGetItems</code> and <code>TransactWriteItems</code> are still in development</li><li><code>mlrd</code> is fully-compatible with all expressions: <code>ConditionExpression</code>, <code>FilterExpression</code>, <code>UpdateExpression</code>, <code>KeyConditionExpression</code>, and <code>ProjectionExpression</code>.</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/docs/v0-beta/quick-start/ class="flex align-center"><img src=/docs/icons/backward.svg class=book-icon alt=Backward>
<span>Quick Start</span>
</a></span><span><a href=/docs/v0-beta/concepts/ class="flex align-center"><span>Concepts</span>
<img src=/docs/icons/forward.svg class=book-icon alt=Forward></a></span></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#mlrd-server><code>mlrd</code> Server</a></li><li><a href=#tables>Tables</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#supported-requests>Supported Requests</a></li></ul></nav></div></aside></main></body></html>